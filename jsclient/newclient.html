<html>
<head>
	<title>Beta replacement client</title>

	<script src="head.js"></script>
	<script>
		var ted, hostws, docs, bcp;

		head.js(
			"jquery.js",
			"textile.js",
			"util.js",
			"buffer.js",
			"stream.js",
			"ctree.js",
			"operation.js",
			"bcp.js",
			"view.js")

		head.ready("textile.js",function(){
			ted = new Textile.Editor('editor');
		})

		head.ready("stream.js",function(){
			// Find port
			wsport = get_url_variable("ws",9091)
			// Start websocket
			hostws = new ws_stream("ws://localhost:"+wsport+"/");
		});

		head.ready("bcp.js",function(){
			// Start BCP processor
			docs = new DocumentHandler();
			bcp = new BCP(docs, hostws, null)
		});

		var rootview;
		head.ready("view.js",function(){
			rootview = docs.get("hello")
		});
	</script>
</head>
<body>
<p>
<img src="OrchardBigLogo.svg" alt="Orchard Logo"/>
</p>

<p><canvas id="editor" width="800" height="300"></canvas></p>

</body>
</html>
